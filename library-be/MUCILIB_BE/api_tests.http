### MUCILIB API Testing with REST Client
# You can run these tests directly in VS Code by installing the "REST Client" extension.

@baseUrl = http://localhost:4000/api
@authToken = YOUR_BEARER_TOKEN_HERE

### ==========================================
### 1. SYSTEM & HEALTH
### ==========================================

### Health Check
GET http://localhost:4000/health

### ==========================================
### 2. AUTHENTICATION (Auth)
### ==========================================

### Auth: Register
POST {{baseUrl}}/auth/register
Content-Type: application/json

{
  "name": "Test User",
  "email": "testuser@example.com",
  "password": "password123"
}

### Auth: Login
# @name login
POST {{baseUrl}}/auth/login
Content-Type: application/json

{
  "email": "testuser@example.com",
  "password": "password123"
}

### Auth: Campus Sync (Google Callback)
POST {{baseUrl}}/auth/google-callback
Content-Type: application/json

{
    "email": "student@umc.ac.id"
}

### Auth: Get All Users (Super Admin Only)
GET {{baseUrl}}/auth/users
Authorization: Bearer {{authToken}}

### ==========================================
### 3. MEMBER PROFILE
### ==========================================

### Get My Profile
GET {{baseUrl}}/members/me
Authorization: Bearer {{authToken}}

### Update My Profile
PATCH {{baseUrl}}/members/me
Authorization: Bearer {{authToken}}
Content-Type: application/json

{
  "faculty": "Teknik",
  "phone": "08123456789"
}

### ==========================================
### 4. CATEGORIES
### ==========================================

### Get All Categories
GET {{baseUrl}}/categories

### Create Category (Super Admin Only)
POST {{baseUrl}}/categories
Authorization: Bearer {{authToken}}
Content-Type: application/json

{
  "name": "Science Fiction",
  "description": "Fictional world based on science"
}

### ==========================================
### 5. COLLECTIONS (Books)
### ==========================================

### Get All Collections
GET {{baseUrl}}/collections

### Create Collection (Super Admin Only)
POST {{baseUrl}}/collections
Authorization: Bearer {{authToken}}
Content-Type: application/json

{
  "title": "Clean Code",
  "author": "Robert C. Martin",
  "isbn": "978-0132350884",
  "categoryId": 1,
  "description": "A Handbook of Agile Software Craftsmanship"
}

### ==========================================
### 6. LOANS (Peminjaman)
### ==========================================

### Request a Loan
POST {{baseUrl}}/loans/request
Authorization: Bearer {{authToken}}
Content-Type: application/json

{
  "itemId": "ITEM_ID_HERE"
}

### Get My Loan History
GET {{baseUrl}}/loans/history
Authorization: Bearer {{authToken}}

### Get All Loans (Staff/Admin Only)
GET {{baseUrl}}/loans
Authorization: Bearer {{authToken}}

### Verify Loan Token (Staff/Admin Only)
GET {{baseUrl}}/loans/verify/TOKEN_HERE
Authorization: Bearer {{authToken}}

### ==========================================
### 7. NOTIFICATIONS
### ==========================================

### Send Fines Notification (Staff/Admin Only)
POST {{baseUrl}}/notification/send-fines
Authorization: Bearer {{authToken}}
Content-Type: application/json

{
    "email": "user@example.com",
    "name": "John Doe",
    "amount": 5000,
    "bookTitle": "Clean Code"
}

### Send Loans Notification (Staff/Admin Only)
POST {{baseUrl}}/notification/send-loans
Authorization: Bearer {{authToken}}
Content-Type: application/json

{
    "email": "user@example.com",
    "name": "John Doe",
    "bookTitle": "Clean Code",
    "tanggalPengembalian": "2024-03-01"
}
